"use strict";(self.webpackChunkinvitados=self.webpackChunkinvitados||[]).push([[506],{7506:(X,M,i)=>{i.r(M),i.d(M,{ProfileModule:()=>V});var u=i(8341),p=i(1095),x=i(1769),g=i(1552),_=i(7746),l=i(8583),f=i(5987),h=i(8239),y=i(5431),C=i(2238),t=i(7716),b=i(7001),Z=i(629),c=i(3679),v=i(8295),T=i(9983);function A(a,n){if(1&a&&(t.TgZ(0,"div",14),t._UZ(1,"img",15),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.s9C("src",e.srcImage,t.LSH)}}function U(a,n){1&a&&(t.TgZ(0,"div",14),t.TgZ(1,"mat-icon"),t._uU(2,"account_circle"),t.qZA(),t.qZA())}function w(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();let d;return o.srcImage=null,null==(d=o.infoForm.get("photoURL"))?null:d.setValue("")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}let I=(()=>{class a{constructor(e,r,o,d,m){this.data=e,this.dialogRef=r,this._snackBar=o,this.auth=d,this.fb=m,this.debug=!0,this.srcImage=null,this.initForm()}ngOnInit(){this.debug&&console.log("EDIT",this.data),this.srcImage=this.data.currentUser.photoURL}initForm(){this.infoForm=this.fb.group({displayName:[this.data.currentUser.displayName],photoURL:[this.data.currentUser.photoURL]})}updateInfo(){var e=this;return(0,h.Z)(function*(){yield e.auth.updateCurrentUser(e.infoForm.value).then(()=>{e.openSnackBar("Informaci\xf3n actualizada","Ok","bg-success"),e.dialogRef.close(e.data.currentUser)}).catch(r=>{console.error(r),e.openSnackBar("Oops... Algo ha fallado al intentar actualizar tu informaci\xf3n","Ok","bg-danger"),e.cancel()})})()}cancel(){this.dialogRef.close()}openSnackBar(e,r,o){this._snackBar.open(e,r,{duration:2e3,panelClass:[o]})}onChangeURL(e){console.log("\u{1f680} ~ file: edit-profile-dialog.component.ts ~ line 65 ~ EditProfileDialogComponent ~ onChangeURL ~ e",e),this.srcImage=e.target.value,console.log("\u{1f680} ~ file: edit-profile-dialog.component.ts ~ line 67 ~ EditProfileDialogComponent ~ onChangeURL ~ his.srcImage",this.srcImage)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(C.WI),t.Y36(C.so),t.Y36(b.ux),t.Y36(Z.e),t.Y36(c.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-edit-profile-dialog"]],decls:31,vars:8,consts:[["mat-dialog-title","",1,"d-flex","align-items-center"],[1,"p-text"],[3,"formGroup","ngSubmit"],["mat-dialog-content","",1,"mb-5"],["appearance","fill"],["matInput","","formControlName","displayName",3,"value"],[1,"d-flex","justify-content-center"],["class","avatar",4,"ngIf"],["appearance","fill",1,"w-100","mb-2"],["matInput","","formControlName","photoURL",1,"w-100",3,"value","change"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"row","d-flex","justify-content-between"],["mat-stroked-button","","color","primary","type","button",1,"btn-dialog",3,"click"],["mat-stroked-button","","color","primary","type","submit","cdkFocusInitial","",1,"btn-dialog"],[1,"avatar"],["alt","Imagen de perfil",3,"src"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"h3",1),t._uU(3),t.qZA(),t.TgZ(4,"form",2),t.NdJ("ngSubmit",function(){return r.updateInfo()}),t.TgZ(5,"div",3),t.TgZ(6,"mat-form-field",4),t.TgZ(7,"mat-label"),t._uU(8,"Nombre para mostrar"),t.qZA(),t._UZ(9,"input",5),t.qZA(),t.TgZ(10,"p",1),t._uU(11,"Si a\xf1ades una foto de perfil personalizada sabr\xe1s si has iniciado sesi\xf3n en tu cuenta"),t.qZA(),t.TgZ(12,"div",6),t.YNc(13,A,2,1,"div",7),t.YNc(14,U,3,0,"div",7),t.qZA(),t.TgZ(15,"mat-form-field",8),t.TgZ(16,"mat-label"),t._uU(17,"Foto de perfil"),t.qZA(),t.TgZ(18,"input",9),t.NdJ("change",function(d){return r.onChangeURL(d)}),t.qZA(),t.YNc(19,w,3,0,"button",10),t.qZA(),t.TgZ(20,"p",1),t._uU(21,"Pega aqu\xed la URL de la foto que quieras utilizar como tu foto de perfil. No es necesario subir documentos de momento."),t.qZA(),t.qZA(),t.TgZ(22,"div",11),t.TgZ(23,"button",12),t.NdJ("click",function(){return r.cancel()}),t.TgZ(24,"mat-icon"),t._uU(25,"close"),t.qZA(),t._uU(26," Cancelar "),t.qZA(),t.TgZ(27,"button",13),t.TgZ(28,"mat-icon"),t._uU(29,"edit"),t.qZA(),t._uU(30," Cambiar "),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.hij(" ",r.data.title,"\n"),t.xp6(2),t.hij(" ",r.data.subtitle,"\n"),t.xp6(1),t.Q6J("formGroup",r.infoForm),t.xp6(5),t.s9C("value",r.data.currentUser.displayName),t.xp6(4),t.Q6J("ngIf",null!=r.srcImage),t.xp6(1),t.Q6J("ngIf",null==r.srcImage||r.data.currentUser.photoURL&&null==r.srcImage),t.xp6(4),t.s9C("value",r.data.currentUser.photoURL),t.xp6(1),t.Q6J("ngIf",r.srcImage))},directives:[c._Y,c.JL,c.sg,v.KE,v.hX,T.Nt,c.Fj,c.JJ,c.u,l.O5,p.lW,g.Hw,v.R9],styles:[".avatar[_ngcontent-%COMP%]{overflow:hidden;display:inline-block;border-radius:500px;height:172px;width:172px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:172px}.avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:172px;width:172px;font-size:172px}.p-text[_ngcontent-%COMP%]{font-family:Roboto,Arial,sans-serif;line-height:1.25rem;font-size:.875rem;letter-spacing:.0142857143em;font-weight:400;color:#5f6368}.btn-dialog[_ngcontent-%COMP%]{width:49%}"]}),a})();var P=i(1855),s=i(2458);function D(a,n){if(1&a&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.Oqu(e.currentUser.displayName)}}function S(a,n){1&a&&(t.TgZ(0,"span",20),t._uU(1,"No tienes un nombre para mostrar"),t.qZA())}function k(a,n){if(1&a&&(t.TgZ(0,"div",24),t._UZ(1,"img",25),t.qZA()),2&a){const e=t.oxw(2);t.xp6(1),t.s9C("src",e.currentUser.photoURL,t.LSH)}}function E(a,n){1&a&&(t.TgZ(0,"div",26),t.TgZ(1,"mat-icon"),t._uU(2,"account_circle"),t.qZA(),t.qZA())}function R(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).sendEmailVerification()}),t._uU(1,"Verificar"),t.qZA()}}function q(a,n){1&a&&(t.TgZ(0,"mat-chip",28),t.TgZ(1,"mat-icon"),t._uU(2,"verified"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Verificado"),t.qZA(),t.qZA())}function F(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"header",5),t.TgZ(2,"h2",6),t._uU(3,"Informaci\xf3n b\xe1sica"),t.qZA(),t.qZA(),t.TgZ(4,"div",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().editProfile()}),t.TgZ(5,"div",8),t.TgZ(6,"span",9),t._uU(7,"NOMBRE"),t.qZA(),t.YNc(8,D,2,1,"span",10),t.YNc(9,S,2,0,"span",10),t.qZA(),t._UZ(10,"mat-divider"),t.TgZ(11,"div",11),t.TgZ(12,"span",9),t._uU(13,"IMAGEN DE PERFIL"),t.qZA(),t.TgZ(14,"div",12),t.YNc(15,k,2,1,"div",13),t.YNc(16,E,3,0,"div",14),t.TgZ(17,"span",15),t._uU(18,"Puedes personalizar tu cuenta con una foto de perfil"),t.qZA(),t.qZA(),t.qZA(),t._UZ(19,"mat-divider"),t.qZA(),t.TgZ(20,"div",16),t.TgZ(21,"div",17),t.TgZ(22,"span",18),t._uU(23,"CORREO ELECTR\xd3NICO"),t.qZA(),t._UZ(24,"div",19),t.TgZ(25,"span",20),t._uU(26),t.qZA(),t.qZA(),t.TgZ(27,"div"),t.YNc(28,R,2,0,"button",21),t.TgZ(29,"mat-chip-list",22),t.YNc(30,q,5,0,"mat-chip",23),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(4),t.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),t.xp6(4),t.Q6J("ngIf",e.currentUser.displayName),t.xp6(1),t.Q6J("ngIf",!e.currentUser.displayName),t.xp6(6),t.Q6J("ngIf",e.currentUser.photoURL),t.xp6(1),t.Q6J("ngIf",!e.currentUser.photoURL),t.xp6(10),t.Oqu(e.currentUser.email),t.xp6(2),t.Q6J("ngIf",!e.currentUser.emailVerified),t.xp6(2),t.Q6J("ngIf",e.currentUser.emailVerified)}}function O(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",29),t.TgZ(1,"header",5),t.TgZ(2,"h2",6),t._uU(3,"Seguridad"),t.qZA(),t.qZA(),t.TgZ(4,"div",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetPassword()}),t.TgZ(5,"div",30),t.TgZ(6,"span",31),t._uU(7,"REESTABLECE TU CONTRASE\xd1A"),t.qZA(),t.TgZ(8,"span",20),t._uU(9),t.ALo(10,"date"),t.qZA(),t.TgZ(11,"mat-icon",32),t._uU(12,"key"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();t.xp6(4),t.Q6J("matRippleCentered",!1)("matRippleDisabled",!1)("matRippleUnbounded",!1),t.xp6(5),t.hij("\xdaltima modificaci\xf3n ",t.lcZ(10,4,e.currentUser.reloadUserInfo.passwordUpdatedAt),"")}}const N=[{path:"",component:(()=>{class a{constructor(e,r,o,d){this.auth=e,this.dialog=r,this.router=o,this._snackBar=d}ngOnInit(){this.getCurrentUser(),console.log("USER",this.currentUser)}getCurrentUser(){this.currentUser=this.auth.getCurrentUser()}editProfile(){this.dialog.open(I,{width:"400px",height:"71.5vh",minHeight:"71.5vh",data:{title:"Editar informaci\xf3n",subtitle:"Edita tu informaci\xf3n b\xe1sica y as\xed podr\xe1s reconocer tu cuenta mmas f\xe1cilmente. Elige un nombre para mostra y una imagen de perfil mediante URL",currentUser:this.currentUser}})}resetPassword(){var r,e=this;this.dialog.open(P.p,{width:"400px",data:{title:"Recuperar contrase\xf1a",subtitle:"Se va a enviar un email a la direcci\xf3n de correo electr\xf3nico que proporcionaste en tu resgistro. Pulsa sobre la URL que aparece en este email y cambia tu contrase\xf1a. Es necesario tener verificado el email",openBy:y.x.resetPassword,data:null===(r=this.currentUser)||void 0===r?void 0:r.email}}).afterClosed().subscribe(function(){var d=(0,h.Z)(function*(m){if(m)try{e.currentUser&&e.currentUser.email&&e.currentUser.emailVerified?(yield e.auth.resetPassword(e.currentUser.email),e.auth.logout(),e.openSnackBar("Email enviado correctamente. Vuelve a iniciar sesi\xf3n","Ok","bg-success"),e.router.navigate(["/login"])):e.openSnackBar("El usuario no existe o tu direcci\xf3n de email no est\xe1 verificada","Ok","bg-danger")}catch(ut){e.openSnackBar("Oops...Hubo un error al enviar el email de recuperaci\xf3n","Ok","bg-danger")}});return function(m){return d.apply(this,arguments)}}())}openSnackBar(e,r,o){this._snackBar.open(e,r,{duration:2e3,panelClass:[o]})}sendEmailVerification(){var e=this;return(0,h.Z)(function*(){yield e.auth.sendEmailVerification(e.currentUser).then(()=>{e.openSnackBar("Email enviado correctamente. Verifica tu email","Ok","bg-success")}).catch(()=>{e.openSnackBar("Oops...Hubo un error al enviar el email de verificaci\xf3n","Ok","bg-danger")})})()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Z.e),t.Y36(C.uw),t.Y36(f.F0),t.Y36(b.ux))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-profile"]],decls:4,vars:2,consts:[[1,"container","justify-content-center"],[1,"col-auto"],["class","border rounded",4,"ngIf"],["class","border rounded mt-4 mb-5 container-row",4,"ngIf"],[1,"border","rounded"],[1,"pt-3"],[1,"headerTitle"],["matRipple","","role","button",1,"example-ripple-container","justify-content-start","min-height-48","px-2",3,"matRippleCentered","matRippleDisabled","matRippleUnbounded","click"],[1,"d-flex","justify-content-start","min-height-48","py-3","px-2","container-row"],[1,"titleSpan"],["class","valueSpan",4,"ngIf"],[1,"d-flex","justify-content-start","min-height-48","py-3","line-row"],[1,"d-flex"],["class","avatar",4,"ngIf"],["class","avatar d-flex",4,"ngIf"],[1,"valueSpan","mx-2"],[1,"d-flex","justify-content-between","min-height-48","py-3","px-3","container-row"],[1,"d-flex","align-content-center","container-row","rowEmail"],[1,"titleSpan","titleEmail",2,"width","auto"],[1,"spacing-4"],[1,"valueSpan"],["mat-stroked-button","","color","warn",3,"click",4,"ngIf"],["aria-label","Fish selection"],["color","primary","selected","",4,"ngIf"],[1,"avatar"],["alt","Profile image",3,"src"],[1,"avatar","d-flex"],["mat-stroked-button","","color","warn",3,"click"],["color","primary","selected",""],[1,"border","rounded","mt-4","mb-5","container-row"],[1,"d-flex","justify-content-between","align-items-center","min-height-48","py-3","px-2"],[1,"titleSpan",2,"width","fit-content"],["color","primary"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.YNc(2,F,31,10,"div",2),t.YNc(3,O,13,6,"div",3),t.qZA(),t.qZA()),2&e&&(t.xp6(2),t.Q6J("ngIf",r.currentUser),t.xp6(1),t.Q6J("ngIf",r.currentUser))},directives:[l.O5,s.wG,x.d,u.qn,g.Hw,p.lW,u.HS],pipes:[l.uU],styles:['.titleSpan[_ngcontent-%COMP%]{letter-spacing:.07272727em;font-family:Roboto,Arial,sans-serif;font-size:.6875rem;font-weight:500;text-transform:uppercase;-webkit-hyphens:auto;hyphens:auto;word-break:break-word;word-wrap:break-word;color:#5f6368;margin:0;padding:0;width:15%;align-self:center}.valueSpan[_ngcontent-%COMP%]{align-self:center}.min-height-48[_ngcontent-%COMP%]{min-height:48px}.avatar[_ngcontent-%COMP%]{overflow:hidden;display:inline-block;border-radius:500px;height:60px;width:60px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px}.avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:60px;width:60px;font-size:60px}.headerTitle[_ngcontent-%COMP%]{font-family:"Product Sans",Roboto,Arial,sans-serif;font-size:1.375rem;font-weight:400;letter-spacing:0;line-height:1.75rem;-webkit-hyphens:auto;hyphens:auto;word-break:break-word;word-wrap:break-word;color:#202124;margin-left:16px}.line-row[_ngcontent-%COMP%]{padding:8px}.spacing-4[_ngcontent-%COMP%]{display:inline-block;width:4em}@media (max-width: 600px){.line-row[_ngcontent-%COMP%]{display:inline-block!important;padding-left:8px}.titleSpan[_ngcontent-%COMP%]{min-width:25%}.container-row[_ngcontent-%COMP%]{justify-content:space-between!important}.avatar[_ngcontent-%COMP%]{width:70px}.rowEmail[_ngcontent-%COMP%]{flex-direction:column!important}.rowEmail[_ngcontent-%COMP%]   .titleEmail[_ngcontent-%COMP%]{width:auto!important;align-self:flex-start!important}}']}),a})()}];let L=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[f.Bz.forChild(N)],f.Bz]}),a})();i(6237);let z=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[s.BQ],s.BQ]}),a})(),V=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[l.ez,L,z,_.ie,s.si,g.Ps,x.t,p.ot,u.Hi]]}),a})()}}]);