{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/romerosp/source/repos/Angular/CRUD_Firebase_invitados/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { map, startWith } from 'rxjs/operators';\nlet HomeComponent = class HomeComponent {\n  constructor(dataService, router) {\n    this.dataService = dataService;\n    this.router = router;\n    this.myControl = new FormControl();\n    this.options = [];\n    this.navExtras = {\n      state: {\n        persona: null\n      }\n    };\n    this.columns = [{\n      columnDef: 'nombre',\n      header: 'Nombre',\n      cell: element => `${element.nombre} ${element.apellidos}`\n    }, {\n      columnDef: 'parentesco',\n      header: 'Parentesco',\n      cell: element => `${element.parentesco}`\n    }, {\n      columnDef: 'invitado',\n      header: 'Invitado',\n      cell: element => element.invitado == true ? `SI` : \"\"\n    }, {\n      columnDef: 'confirmado',\n      header: 'Confirmado',\n      cell: element => element.confirmado == true ? `SI` : \"\"\n    }];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.invitadosFake = [{\n        nombre: \"nada\",\n        apellidos: \"de nada\",\n        parentesco: \"Amigo/a\",\n        sexo: \"Hombre\",\n        ubicacion: \"Madrid\",\n        invitado: false,\n        confirmado: false\n      }];\n      yield _this.getInvitados();\n    })();\n  }\n\n  getInvitados() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.dataService.invitados.subscribe(invitados => {\n        _this2.invitados = invitados;\n        _this2.options = invitados;\n        _this2.filteredOptions = _this2.myControl.valueChanges.pipe(startWith(''), map(value => _this2._filter(value)));\n\n        _this2.fillTable(invitados);\n      });\n    })();\n  }\n\n  goToNew() {\n    this.router.navigate(['new']);\n  }\n\n  goToEdit(persona) {\n    if (this.navExtras.state) this.navExtras.state = persona;\n    this.router.navigate(['edit'], this.navExtras);\n  }\n\n  onDelete(id) {\n    this.dataService.deleteInvitado(id);\n  }\n\n  fillTable(ELEMENT_DATA) {\n    this.displayedColumns = this.columns.map(c => c.columnDef);\n  }\n\n  _filter(value) {\n    const filterValue = value.toLowerCase();\n    console.log(this.options.filter(option => option.nombre.toLowerCase().includes(filterValue)));\n    return this.invitados.filter(option => option.nombre.toLowerCase().includes(filterValue));\n  }\n\n};\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"sources":["C:/Users/romerosp/source/repos/Angular/CRUD_Firebase_invitados/src/app/pages/home/home.component.ts"],"names":["__decorate","Component","FormControl","map","startWith","HomeComponent","constructor","dataService","router","myControl","options","navExtras","state","persona","columns","columnDef","header","cell","element","nombre","apellidos","parentesco","invitado","confirmado","ngOnInit","invitadosFake","sexo","ubicacion","getInvitados","invitados","subscribe","filteredOptions","valueChanges","pipe","value","_filter","fillTable","goToNew","navigate","goToEdit","onDelete","id","deleteInvitado","ELEMENT_DATA","displayedColumns","c","filterValue","toLowerCase","console","log","filter","option","includes","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { map, startWith } from 'rxjs/operators';\r\nlet HomeComponent = class HomeComponent {\r\n    constructor(dataService, router) {\r\n        this.dataService = dataService;\r\n        this.router = router;\r\n        this.myControl = new FormControl();\r\n        this.options = [];\r\n        this.navExtras = {\r\n            state: {\r\n                persona: null\r\n            }\r\n        };\r\n        this.columns = [\r\n            {\r\n                columnDef: 'nombre',\r\n                header: 'Nombre',\r\n                cell: (element) => `${element.nombre} ${element.apellidos}`\r\n            },\r\n            {\r\n                columnDef: 'parentesco',\r\n                header: 'Parentesco',\r\n                cell: (element) => `${element.parentesco}`\r\n            },\r\n            {\r\n                columnDef: 'invitado',\r\n                header: 'Invitado',\r\n                cell: (element) => element.invitado == true ? `SI` : \"\"\r\n            },\r\n            {\r\n                columnDef: 'confirmado',\r\n                header: 'Confirmado',\r\n                cell: (element) => element.confirmado == true ? `SI` : \"\"\r\n            }\r\n        ];\r\n    }\r\n    async ngOnInit() {\r\n        this.invitadosFake = [{ nombre: \"nada\", apellidos: \"de nada\", parentesco: \"Amigo/a\", sexo: \"Hombre\", ubicacion: \"Madrid\", invitado: false, confirmado: false }];\r\n        await this.getInvitados();\r\n    }\r\n    async getInvitados() {\r\n        await this.dataService.invitados.subscribe((invitados) => {\r\n            this.invitados = invitados;\r\n            this.options = invitados;\r\n            this.filteredOptions = this.myControl.valueChanges.pipe(startWith(''), map(value => this._filter(value)));\r\n            this.fillTable(invitados);\r\n        });\r\n    }\r\n    goToNew() {\r\n        this.router.navigate(['new']);\r\n    }\r\n    goToEdit(persona) {\r\n        if (this.navExtras.state)\r\n            this.navExtras.state = persona;\r\n        this.router.navigate(['edit'], this.navExtras);\r\n    }\r\n    onDelete(id) {\r\n        this.dataService.deleteInvitado(id);\r\n    }\r\n    fillTable(ELEMENT_DATA) {\r\n        this.displayedColumns = this.columns.map(c => c.columnDef);\r\n    }\r\n    _filter(value) {\r\n        const filterValue = value.toLowerCase();\r\n        console.log(this.options.filter(option => option.nombre.toLowerCase().includes(filterValue)));\r\n        return this.invitados.filter(option => option.nombre.toLowerCase().includes(filterValue));\r\n    }\r\n};\r\nHomeComponent = __decorate([\r\n    Component({\r\n        selector: 'app-home',\r\n        templateUrl: './home.component.html',\r\n        styleUrls: ['./home.component.scss']\r\n    })\r\n], HomeComponent);\r\nexport { HomeComponent };\r\n"]},"metadata":{},"sourceType":"module"}