{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/romerosp/source/repos/Angular/CRUD_Firebase_invitados/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { Component, HostListener, ViewChild } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { map, startWith } from 'rxjs/operators';\nimport { Grupos } from 'src/assets/grupos';\nlet HomeComponent = class HomeComponent {\n  constructor(dataService, router) {\n    this.dataService = dataService;\n    this.router = router;\n    this.myControl = new FormControl();\n    this.sticky = false;\n    this.options = [];\n    this.numInvitados = 0;\n    this.numInvitadosHombre = 0;\n    this.numInvitadosMujer = 0;\n    this.numInvitadosEnviado = 0;\n    this.numInvitadosConfirmado = 0;\n    this.numInvitacionesRechazadas = 0;\n    this.navExtras = {\n      state: {\n        persona: null\n      }\n    };\n    this.grupos = Grupos;\n  }\n\n  handleScroll() {\n    const windowScroll = window.pageYOffset;\n\n    if (windowScroll >= this.elementPosition) {\n      this.sticky = true;\n    } else {\n      this.sticky = false;\n    }\n  }\n\n  ngAfterViewInit() {\n    this.elementPosition = this.menuElement.underlineRef.nativeElement.offsetTop;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.getInvitados();\n    })();\n  }\n\n  getInvitados() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.dataService.invitados.subscribe(invitados => {\n        _this2.invitados = invitados;\n        _this2.numInvitados = invitados.length;\n        _this2.numInvitadosHombre = invitados.filter(x => x.sexo == \"Hombre\").length;\n        _this2.numInvitadosMujer = invitados.filter(x => x.sexo == \"Mujer\").length;\n        _this2.numInvitadosEnviado = invitados.filter(x => x.invitado == true).length;\n        _this2.numInvitadosConfirmado = invitados.filter(x => x.confirmado == true).length;\n        _this2.numInvitacionesRechazadas = invitados.filter(x => x.rechazado == true).length;\n        _this2.options = invitados;\n        _this2.filteredOptions = _this2.myControl.valueChanges.pipe(startWith(''), map(value => _this2._filter(value)));\n      });\n    })();\n  }\n\n  goToNew() {\n    this.router.navigate(['new']);\n  }\n\n  goToEdit(persona) {\n    if (this.navExtras.state) this.navExtras.state = persona;\n    this.router.navigate(['edit'], this.navExtras);\n  }\n\n  onDelete(id) {\n    this.dataService.deleteInvitado(id);\n  }\n\n  _filter(value) {\n    const filterValue = value.toLowerCase();\n    return this.invitados.filter(option => {\n      var _a;\n\n      return option.nombre.toLowerCase().includes(filterValue) || ((_a = option.apellidos) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(filterValue));\n    });\n  }\n\n  filterInvitados(e) {\n    this.invitados = this.invitados.filter(x => x.id === e);\n  }\n\n};\n\n__decorate([ViewChild('formSearch')], HomeComponent.prototype, \"menuElement\", void 0);\n\n__decorate([HostListener('window:scroll', ['$event'])], HomeComponent.prototype, \"handleScroll\", null);\n\nHomeComponent = __decorate([Component({\n  selector: 'app-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})], HomeComponent);\nexport { HomeComponent };","map":{"version":3,"sources":["C:/Users/romerosp/source/repos/Angular/CRUD_Firebase_invitados/src/app/pages/home/home.component.ts"],"names":["__decorate","Component","HostListener","ViewChild","FormControl","map","startWith","Grupos","HomeComponent","constructor","dataService","router","myControl","sticky","options","numInvitados","numInvitadosHombre","numInvitadosMujer","numInvitadosEnviado","numInvitadosConfirmado","numInvitacionesRechazadas","navExtras","state","persona","grupos","handleScroll","windowScroll","window","pageYOffset","elementPosition","ngAfterViewInit","menuElement","underlineRef","nativeElement","offsetTop","ngOnInit","getInvitados","invitados","subscribe","length","filter","x","sexo","invitado","confirmado","rechazado","filteredOptions","valueChanges","pipe","value","_filter","goToNew","navigate","goToEdit","onDelete","id","deleteInvitado","filterValue","toLowerCase","option","_a","nombre","includes","apellidos","filterInvitados","e","prototype","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component, HostListener, ViewChild } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { map, startWith } from 'rxjs/operators';\r\nimport { Grupos } from 'src/assets/grupos';\r\nlet HomeComponent = class HomeComponent {\r\n    constructor(dataService, router) {\r\n        this.dataService = dataService;\r\n        this.router = router;\r\n        this.myControl = new FormControl();\r\n        this.sticky = false;\r\n        this.options = [];\r\n        this.numInvitados = 0;\r\n        this.numInvitadosHombre = 0;\r\n        this.numInvitadosMujer = 0;\r\n        this.numInvitadosEnviado = 0;\r\n        this.numInvitadosConfirmado = 0;\r\n        this.numInvitacionesRechazadas = 0;\r\n        this.navExtras = {\r\n            state: {\r\n                persona: null\r\n            }\r\n        };\r\n        this.grupos = Grupos;\r\n    }\r\n    handleScroll() {\r\n        const windowScroll = window.pageYOffset;\r\n        if (windowScroll >= this.elementPosition) {\r\n            this.sticky = true;\r\n        }\r\n        else {\r\n            this.sticky = false;\r\n        }\r\n    }\r\n    ngAfterViewInit() {\r\n        this.elementPosition = this.menuElement.underlineRef.nativeElement.offsetTop;\r\n    }\r\n    async ngOnInit() {\r\n        await this.getInvitados();\r\n    }\r\n    async getInvitados() {\r\n        await this.dataService.invitados.subscribe((invitados) => {\r\n            this.invitados = invitados;\r\n            this.numInvitados = invitados.length;\r\n            this.numInvitadosHombre = invitados.filter(x => x.sexo == \"Hombre\").length;\r\n            this.numInvitadosMujer = invitados.filter(x => x.sexo == \"Mujer\").length;\r\n            this.numInvitadosEnviado = invitados.filter(x => x.invitado == true).length;\r\n            this.numInvitadosConfirmado = invitados.filter(x => x.confirmado == true).length;\r\n            this.numInvitacionesRechazadas = invitados.filter(x => x.rechazado == true).length;\r\n            this.options = invitados;\r\n            this.filteredOptions = this.myControl.valueChanges.pipe(startWith(''), map(value => this._filter(value)));\r\n        });\r\n    }\r\n    goToNew() {\r\n        this.router.navigate(['new']);\r\n    }\r\n    goToEdit(persona) {\r\n        if (this.navExtras.state)\r\n            this.navExtras.state = persona;\r\n        this.router.navigate(['edit'], this.navExtras);\r\n    }\r\n    onDelete(id) {\r\n        this.dataService.deleteInvitado(id);\r\n    }\r\n    _filter(value) {\r\n        const filterValue = value.toLowerCase();\r\n        return this.invitados.filter(option => { var _a; return option.nombre.toLowerCase().includes(filterValue) || ((_a = option.apellidos) === null || _a === void 0 ? void 0 : _a.toLowerCase().includes(filterValue)); });\r\n    }\r\n    filterInvitados(e) {\r\n        this.invitados = this.invitados.filter(x => x.id === e);\r\n    }\r\n};\r\n__decorate([\r\n    ViewChild('formSearch')\r\n], HomeComponent.prototype, \"menuElement\", void 0);\r\n__decorate([\r\n    HostListener('window:scroll', ['$event'])\r\n], HomeComponent.prototype, \"handleScroll\", null);\r\nHomeComponent = __decorate([\r\n    Component({\r\n        selector: 'app-home',\r\n        templateUrl: './home.component.html',\r\n        styleUrls: ['./home.component.scss']\r\n    })\r\n], HomeComponent);\r\nexport { HomeComponent };\r\n"]},"metadata":{},"sourceType":"module"}