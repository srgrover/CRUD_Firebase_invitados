{"ast":null,"code":"import _asyncToGenerator from \"D:/Proyectos/Programaci\\xF3n/Angular/CRUD_Firebase_invitados/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { DataService } from '../../services/data.service';\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nlet FormComponent = class FormComponent {\n  constructor(fb, dataService, router, _snackBar, _dialog, _bottomSheet) {\n    var _a, _b, _c, _d;\n\n    this.fb = fb;\n    this.dataService = dataService;\n    this.router = router;\n    this._snackBar = _snackBar;\n    this._dialog = _dialog;\n    this._bottomSheet = _bottomSheet;\n    this.sexoList = [];\n    this.parentescoList = [];\n    this.stateForm = 0;\n    this.grupos = [];\n    this.panelOpenState = false;\n    var navi = this.router.getCurrentNavigation();\n    this.persona = (_a = navi === null || navi === void 0 ? void 0 : navi.extras) === null || _a === void 0 ? void 0 : _a.state;\n    this.states = {\n      new: 1,\n      edit: 2\n    };\n    this.stateForm = this.getState();\n    this.sexoList = [\"Hombre\", \"Mujer\"];\n    this.parentescoList = [\"Padre\", \"Madre\", \"Hermano/a\", \"Tio/a\", \"Primo/a\", \"Abuelo/a\", \"Amigo/a\", \"CuÃ±ado/a\", \"Otro\"];\n    this.sexoInvitado = ((_b = this.persona) === null || _b === void 0 ? void 0 : _b.sexo) || \"\";\n    this.parentescoInvitado = ((_c = this.persona) === null || _c === void 0 ? void 0 : _c.parentesco) || \"\";\n    this.grupoInvitado = ((_d = this.persona) === null || _d === void 0 ? void 0 : _d.grupo) || \"\";\n    this.initForm();\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (_this.stateForm === _this.states.edit) {\n        _this.invitadoForm.patchValue(_this.persona);\n      }\n\n      yield _this.getGrupos();\n    })();\n  }\n\n  openDialog() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      //this._dialog.open(DialogConfirmComponent);\n      _this2.grupo2 = {\n        id: undefined,\n        descripcion: \"HOLA KKK\"\n      };\n      console.log(_this2.grupo2); //await this.dataService.addGrupo(this.grupo2);\n    })();\n  }\n\n  onSave() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      if (_this3.invitadoForm.valid) {\n        try {\n          const invitado = _this3.invitadoForm.value;\n          invitado.id = ((_a = _this3.persona) === null || _a === void 0 ? void 0 : _a.id) || null;\n          yield _this3.dataService.addInvitado(invitado);\n\n          if (_this3.stateForm == _this3.states.new) {\n            //Swal.fire('Invitado aÃ±adido', 'Puedes verlo en la lista', 'success');\n            _this3.openSnackBar('Invitado aÃ±adido correctamente', 'Ok', 'bg-success');\n\n            _this3.invitadoForm.reset();\n\n            _this3.initForm();\n          } else if (_this3.stateForm == _this3.states.edit) {\n            //Swal.fire('Invitado editado', 'Pulsa Ok Para volver a la lista', 'success');\n            _this3.openSnackBar('Invitado Editado correctamente', 'Ok', 'bg-success');\n\n            _this3.router.navigate(['home']);\n          }\n\n          _this3.invitadoForm.controls['invitado'].markAsTouched();\n\n          _this3.invitadoForm.controls['confirmado'].markAsTouched();\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        //Swal.fire('Oops...', 'Comprueba los datos del formulario', 'error');\n        _this3.openSnackBar('Oops... Comprueba los datos del formulario', 'Ok', 'bg-danger');\n      }\n    })();\n  }\n\n  isValidField(field) {\n    const validatedField = this.invitadoForm.get(field);\n    return !(validatedField === null || validatedField === void 0 ? void 0 : validatedField.valid) && (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched) ? 'is-invalid' : (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched) ? 'is-valid' : '';\n  }\n\n  notRequiredHasValue(field) {\n    var _a;\n\n    return ((_a = this.invitadoForm.get(field)) === null || _a === void 0 ? void 0 : _a.value) ? 'is-valid' : '';\n  }\n\n  initForm() {\n    this.invitadoForm = this.fb.group({\n      nombre: ['', [Validators.required]],\n      apellidos: [''],\n      sexo: ['Hombre', [Validators.required]],\n      parentesco: ['Padre', [Validators.required]],\n      ubicacion: [''],\n      invitado: [false, [Validators.required]],\n      confirmado: [false, [Validators.required]],\n      grupo: [1, [Validators.required]]\n    });\n  }\n\n  getState() {\n    return this.persona && typeof (this.persona !== undefined) ? 2 : 1;\n  }\n\n  goToDelete(id) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this4.dataService.deleteInvitado(id); //Swal.fire('Invitado eliminado', 'Se ha eliminado el invitado correctamente', 'success');\n\n        _this4.openSnackBar('Invitado eliminado correctamente', 'Ok', 'bg-success');\n\n        _this4.router.navigate(['home']);\n      } catch (err) {\n        //Swal.fire('Oops...', 'Hubo un error al eliminar al invitado', 'error');\n        _this4.openSnackBar('Oops...Hubo un error al eliminar al invitado', 'Ok', 'bg-danger');\n      }\n    })();\n  }\n\n  openSnackBar(message, action, type) {\n    this._snackBar.open(message, action, {\n      duration: 2000,\n      panelClass: [type]\n    });\n  }\n  /*openBottomSheet(): void {\r\n    this._bottomSheet.open(BottomSheetOverviewExampleSheet);\r\n  }*/\n\n\n  getGrupos() {\n    var _this5 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this5.dataService.grupos.subscribe(grupos => {\n        _this5.grupos = grupos;\n        console.log(\"ðŸš€ ~ file: form.component.ts ~ line 154 ~ FormComponent ~ getGrupos ~ this.grupos\", _this5.grupos);\n      });\n    })();\n  }\n\n};\nFormComponent = __decorate([Component({\n  selector: 'app-form',\n  templateUrl: './form.component.html',\n  styleUrls: ['./form.component.scss'],\n  providers: [DataService]\n})], FormComponent);\nexport { FormComponent };\nexport class DialogOverviewGroupDialog {\n  constructor(dialogRef, data) {\n    this.dialogRef = dialogRef;\n    this.data = data;\n  }\n\n  onNoClick() {\n    this.dialogRef.close();\n  }\n\n}\n\nDialogOverviewGroupDialog.Éµfac = function DialogOverviewGroupDialog_Factory(t) {\n  return new (t || DialogOverviewGroupDialog)(i0.ÉµÉµdirectiveInject(i1.MatDialogRef), i0.ÉµÉµdirectiveInject(MAT_DIALOG_DATA));\n};\n\nDialogOverviewGroupDialog.Éµcmp = /*@__PURE__*/i0.ÉµÉµdefineComponent({\n  type: DialogOverviewGroupDialog,\n  selectors: [[\"dialog-overview-group-dialog\"]],\n  decls: 0,\n  vars: 0,\n  template: function DialogOverviewGroupDialog_Template(rf, ctx) {},\n  encapsulation: 2\n});","map":{"version":3,"sources":["D:/Proyectos/ProgramaciÃ³n/Angular/CRUD_Firebase_invitados/src/app/shared/components/form/form.component.ts"],"names":["__decorate","DataService","Component","Validators","MAT_DIALOG_DATA","i0","i1","FormComponent","constructor","fb","dataService","router","_snackBar","_dialog","_bottomSheet","_a","_b","_c","_d","sexoList","parentescoList","stateForm","grupos","panelOpenState","navi","getCurrentNavigation","persona","extras","state","states","new","edit","getState","sexoInvitado","sexo","parentescoInvitado","parentesco","grupoInvitado","grupo","initForm","ngOnInit","invitadoForm","patchValue","getGrupos","openDialog","grupo2","id","undefined","descripcion","console","log","onSave","valid","invitado","value","addInvitado","openSnackBar","reset","navigate","controls","markAsTouched","e","error","isValidField","field","validatedField","get","touched","notRequiredHasValue","group","nombre","required","apellidos","ubicacion","confirmado","goToDelete","deleteInvitado","err","message","action","type","open","duration","panelClass","subscribe","selector","templateUrl","styleUrls","providers","DialogOverviewGroupDialog","dialogRef","data","onNoClick","close","Éµfac","DialogOverviewGroupDialog_Factory","t","ÉµÉµdirectiveInject","MatDialogRef","Éµcmp","ÉµÉµdefineComponent","selectors","decls","vars","template","DialogOverviewGroupDialog_Template","rf","ctx","encapsulation"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { DataService } from '../../services/data.service';\r\nimport { Component } from '@angular/core';\r\nimport { Validators } from '@angular/forms';\r\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/material/dialog\";\r\nlet FormComponent = class FormComponent {\r\n    constructor(fb, dataService, router, _snackBar, _dialog, _bottomSheet) {\r\n        var _a, _b, _c, _d;\r\n        this.fb = fb;\r\n        this.dataService = dataService;\r\n        this.router = router;\r\n        this._snackBar = _snackBar;\r\n        this._dialog = _dialog;\r\n        this._bottomSheet = _bottomSheet;\r\n        this.sexoList = [];\r\n        this.parentescoList = [];\r\n        this.stateForm = 0;\r\n        this.grupos = [];\r\n        this.panelOpenState = false;\r\n        var navi = this.router.getCurrentNavigation();\r\n        this.persona = (_a = navi === null || navi === void 0 ? void 0 : navi.extras) === null || _a === void 0 ? void 0 : _a.state;\r\n        this.states = { new: 1, edit: 2 };\r\n        this.stateForm = this.getState();\r\n        this.sexoList = [\"Hombre\", \"Mujer\"];\r\n        this.parentescoList = [\"Padre\", \"Madre\", \"Hermano/a\", \"Tio/a\", \"Primo/a\", \"Abuelo/a\", \"Amigo/a\", \"CuÃ±ado/a\", \"Otro\"];\r\n        this.sexoInvitado = ((_b = this.persona) === null || _b === void 0 ? void 0 : _b.sexo) || \"\";\r\n        this.parentescoInvitado = ((_c = this.persona) === null || _c === void 0 ? void 0 : _c.parentesco) || \"\";\r\n        this.grupoInvitado = ((_d = this.persona) === null || _d === void 0 ? void 0 : _d.grupo) || \"\";\r\n        this.initForm();\r\n    }\r\n    async ngOnInit() {\r\n        if (this.stateForm === this.states.edit) {\r\n            this.invitadoForm.patchValue(this.persona);\r\n        }\r\n        await this.getGrupos();\r\n    }\r\n    async openDialog() {\r\n        //this._dialog.open(DialogConfirmComponent);\r\n        this.grupo2 = { id: undefined, descripcion: \"HOLA KKK\" };\r\n        console.log(this.grupo2);\r\n        //await this.dataService.addGrupo(this.grupo2);\r\n    }\r\n    async onSave() {\r\n        var _a;\r\n        if (this.invitadoForm.valid) {\r\n            try {\r\n                const invitado = this.invitadoForm.value;\r\n                invitado.id = ((_a = this.persona) === null || _a === void 0 ? void 0 : _a.id) || null;\r\n                await this.dataService.addInvitado(invitado);\r\n                if (this.stateForm == this.states.new) {\r\n                    //Swal.fire('Invitado aÃ±adido', 'Puedes verlo en la lista', 'success');\r\n                    this.openSnackBar('Invitado aÃ±adido correctamente', 'Ok', 'bg-success');\r\n                    this.invitadoForm.reset();\r\n                    this.initForm();\r\n                }\r\n                else if (this.stateForm == this.states.edit) {\r\n                    //Swal.fire('Invitado editado', 'Pulsa Ok Para volver a la lista', 'success');\r\n                    this.openSnackBar('Invitado Editado correctamente', 'Ok', 'bg-success');\r\n                    this.router.navigate(['home']);\r\n                }\r\n                this.invitadoForm.controls['invitado'].markAsTouched();\r\n                this.invitadoForm.controls['confirmado'].markAsTouched();\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        else {\r\n            //Swal.fire('Oops...', 'Comprueba los datos del formulario', 'error');\r\n            this.openSnackBar('Oops... Comprueba los datos del formulario', 'Ok', 'bg-danger');\r\n        }\r\n    }\r\n    isValidField(field) {\r\n        const validatedField = this.invitadoForm.get(field);\r\n        return !(validatedField === null || validatedField === void 0 ? void 0 : validatedField.valid) && (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched)\r\n            ? 'is-invalid'\r\n            : (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched)\r\n                ? 'is-valid'\r\n                : '';\r\n    }\r\n    notRequiredHasValue(field) {\r\n        var _a;\r\n        return ((_a = this.invitadoForm.get(field)) === null || _a === void 0 ? void 0 : _a.value) ? 'is-valid' : '';\r\n    }\r\n    initForm() {\r\n        this.invitadoForm = this.fb.group({\r\n            nombre: ['', [Validators.required]],\r\n            apellidos: [''],\r\n            sexo: ['Hombre', [Validators.required]],\r\n            parentesco: ['Padre', [Validators.required]],\r\n            ubicacion: [''],\r\n            invitado: [false, [Validators.required]],\r\n            confirmado: [false, [Validators.required]],\r\n            grupo: [1, [Validators.required]],\r\n        });\r\n    }\r\n    getState() {\r\n        return this.persona && typeof (this.persona !== undefined) ? 2 : 1;\r\n    }\r\n    async goToDelete(id) {\r\n        try {\r\n            await this.dataService.deleteInvitado(id);\r\n            //Swal.fire('Invitado eliminado', 'Se ha eliminado el invitado correctamente', 'success');\r\n            this.openSnackBar('Invitado eliminado correctamente', 'Ok', 'bg-success');\r\n            this.router.navigate(['home']);\r\n        }\r\n        catch (err) {\r\n            //Swal.fire('Oops...', 'Hubo un error al eliminar al invitado', 'error');\r\n            this.openSnackBar('Oops...Hubo un error al eliminar al invitado', 'Ok', 'bg-danger');\r\n        }\r\n    }\r\n    openSnackBar(message, action, type) {\r\n        this._snackBar.open(message, action, {\r\n            duration: 2000,\r\n            panelClass: [type]\r\n        });\r\n    }\r\n    /*openBottomSheet(): void {\r\n      this._bottomSheet.open(BottomSheetOverviewExampleSheet);\r\n    }*/\r\n    async getGrupos() {\r\n        await this.dataService.grupos.subscribe(grupos => {\r\n            this.grupos = grupos;\r\n            console.log(\"ðŸš€ ~ file: form.component.ts ~ line 154 ~ FormComponent ~ getGrupos ~ this.grupos\", this.grupos);\r\n        });\r\n    }\r\n};\r\nFormComponent = __decorate([\r\n    Component({\r\n        selector: 'app-form',\r\n        templateUrl: './form.component.html',\r\n        styleUrls: ['./form.component.scss'],\r\n        providers: [DataService],\r\n    })\r\n], FormComponent);\r\nexport { FormComponent };\r\nexport class DialogOverviewGroupDialog {\r\n    constructor(dialogRef, data) {\r\n        this.dialogRef = dialogRef;\r\n        this.data = data;\r\n    }\r\n    onNoClick() {\r\n        this.dialogRef.close();\r\n    }\r\n}\r\nDialogOverviewGroupDialog.Éµfac = function DialogOverviewGroupDialog_Factory(t) { return new (t || DialogOverviewGroupDialog)(i0.ÉµÉµdirectiveInject(i1.MatDialogRef), i0.ÉµÉµdirectiveInject(MAT_DIALOG_DATA)); };\r\nDialogOverviewGroupDialog.Éµcmp = /*@__PURE__*/ i0.ÉµÉµdefineComponent({ type: DialogOverviewGroupDialog, selectors: [[\"dialog-overview-group-dialog\"]], decls: 0, vars: 0, template: function DialogOverviewGroupDialog_Template(rf, ctx) { }, encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}