{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/romerosp/source/repos/Angular/CRUD_Firebase_invitados/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { __decorate } from \"tslib\";\nimport { DataService } from '../../services/data.service';\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport Swal from 'sweetalert2';\nlet FormComponent = class FormComponent {\n  constructor(fb, dataService, router) {\n    var _a, _b, _c;\n\n    this.fb = fb;\n    this.dataService = dataService;\n    this.router = router;\n    this.sexoList = [];\n    this.parentescoList = [];\n    this.stateForm = 0;\n    var navi = this.router.getCurrentNavigation();\n    this.persona = (_a = navi === null || navi === void 0 ? void 0 : navi.extras) === null || _a === void 0 ? void 0 : _a.state;\n    this.states = {\n      new: 1,\n      edit: 2\n    };\n    this.stateForm = this.getState();\n    this.sexoList = [\"Hombre\", \"Mujer\"];\n    this.parentescoList = [\"Padre\", \"Madre\", \"Hermano/a\", \"Tio/a\", \"Primo/a\", \"Abuelo/a\", \"Amigo/a\", \"Otro\"];\n    this.sexoInvitado = ((_b = this.persona) === null || _b === void 0 ? void 0 : _b.sexo) || \"\";\n    this.parentescoInvitado = ((_c = this.persona) === null || _c === void 0 ? void 0 : _c.parentesco) || \"\";\n    this.initForm();\n  }\n\n  ngOnInit() {\n    if (this.stateForm === this.states.edit) {\n      this.invitadoForm.patchValue(this.persona);\n    }\n  }\n\n  onSave() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      var _a;\n\n      if (_this.invitadoForm.valid) {\n        try {\n          const invitado = _this.invitadoForm.value;\n          invitado.id = ((_a = _this.persona) === null || _a === void 0 ? void 0 : _a.id) || null;\n          yield _this.dataService.addInvitado(invitado);\n\n          if (_this.stateForm == _this.states.new) {\n            Swal.fire('Invitado aÃ±adido', 'Puedes verlo en la lista', 'success');\n\n            _this.invitadoForm.reset();\n\n            _this.initForm();\n          } else if (_this.stateForm == _this.states.edit) {\n            Swal.fire('Invitado editado', 'Pulsa Ok Para volver a la lista', 'success');\n\n            _this.router.navigate(['home']);\n          }\n\n          _this.invitadoForm.controls['invitado'].markAsTouched();\n\n          console.log(\"ðŸš€ ~ file: form.component.ts ~ line 65 ~ FormComponent ~ onSave ~ this.invitadoForm.controls['invitado']\", _this.invitadoForm.controls['invitado']);\n\n          _this.invitadoForm.controls['confirmado'].markAsTouched();\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        Swal.fire('Oops...', 'Comprueba los datos del formulario', 'error');\n      }\n    })();\n  }\n\n  isValidField(field) {\n    const validatedField = this.invitadoForm.get(field);\n    return !(validatedField === null || validatedField === void 0 ? void 0 : validatedField.valid) && (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched) ? 'is-invalid' : (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched) ? 'is-valid' : '';\n  }\n\n  notRequiredHasValue(field) {\n    var _a;\n\n    return ((_a = this.invitadoForm.get(field)) === null || _a === void 0 ? void 0 : _a.value) ? 'is-valid' : '';\n  }\n\n  initForm() {\n    this.invitadoForm = this.fb.group({\n      nombre: ['', [Validators.required]],\n      apellidos: [''],\n      sexo: ['Hombre', [Validators.required]],\n      parentesco: ['', [Validators.required]],\n      ubicacion: ['', [Validators.required]],\n      invitado: [false, [Validators.required]],\n      confirmado: [false, [Validators.required]]\n    });\n  }\n\n  getState() {\n    return this.persona && typeof (this.persona !== undefined) ? 2 : 1;\n  }\n\n  goToDelete(id) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this2.dataService.deleteInvitado(id);\n        Swal.fire('Invitado eliminado', 'Se ha eliminado el invitado correctamente', 'success');\n\n        _this2.router.navigate(['home']);\n      } catch (err) {\n        Swal.fire('Oops...', 'Hubo un error al eliminar al invitado', 'error');\n      }\n    })();\n  }\n\n};\nFormComponent = __decorate([Component({\n  selector: 'app-form',\n  templateUrl: './form.component.html',\n  styleUrls: ['./form.component.scss'],\n  providers: [DataService]\n})], FormComponent);\nexport { FormComponent };","map":{"version":3,"sources":["C:/Users/romerosp/source/repos/Angular/CRUD_Firebase_invitados/src/app/shared/components/form/form.component.ts"],"names":["__decorate","DataService","Component","Validators","Swal","FormComponent","constructor","fb","dataService","router","_a","_b","_c","sexoList","parentescoList","stateForm","navi","getCurrentNavigation","persona","extras","state","states","new","edit","getState","sexoInvitado","sexo","parentescoInvitado","parentesco","initForm","ngOnInit","invitadoForm","patchValue","onSave","valid","invitado","value","id","addInvitado","fire","reset","navigate","controls","markAsTouched","console","log","e","error","isValidField","field","validatedField","get","touched","notRequiredHasValue","group","nombre","required","apellidos","ubicacion","confirmado","undefined","goToDelete","deleteInvitado","err","selector","templateUrl","styleUrls","providers"],"mappings":";AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,WAAT,QAA4B,6BAA5B;AACA,SAASC,SAAT,QAA0B,eAA1B;AACA,SAASC,UAAT,QAA2B,gBAA3B;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,IAAIC,aAAa,GAAG,MAAMA,aAAN,CAAoB;AACpCC,EAAAA,WAAW,CAACC,EAAD,EAAKC,WAAL,EAAkBC,MAAlB,EAA0B;AACjC,QAAIC,EAAJ,EAAQC,EAAR,EAAYC,EAAZ;;AACA,SAAKL,EAAL,GAAUA,EAAV;AACA,SAAKC,WAAL,GAAmBA,WAAnB;AACA,SAAKC,MAAL,GAAcA,MAAd;AACA,SAAKI,QAAL,GAAgB,EAAhB;AACA,SAAKC,cAAL,GAAsB,EAAtB;AACA,SAAKC,SAAL,GAAiB,CAAjB;AACA,QAAIC,IAAI,GAAG,KAAKP,MAAL,CAAYQ,oBAAZ,EAAX;AACA,SAAKC,OAAL,GAAe,CAACR,EAAE,GAAGM,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,KAAK,CAA/B,GAAmC,KAAK,CAAxC,GAA4CA,IAAI,CAACG,MAAvD,MAAmE,IAAnE,IAA2ET,EAAE,KAAK,KAAK,CAAvF,GAA2F,KAAK,CAAhG,GAAoGA,EAAE,CAACU,KAAtH;AACA,SAAKC,MAAL,GAAc;AAAEC,MAAAA,GAAG,EAAE,CAAP;AAAUC,MAAAA,IAAI,EAAE;AAAhB,KAAd;AACA,SAAKR,SAAL,GAAiB,KAAKS,QAAL,EAAjB;AACA,SAAKX,QAAL,GAAgB,CAAC,QAAD,EAAW,OAAX,CAAhB;AACA,SAAKC,cAAL,GAAsB,CAAC,OAAD,EAAU,OAAV,EAAmB,WAAnB,EAAgC,OAAhC,EAAyC,SAAzC,EAAoD,UAApD,EAAgE,SAAhE,EAA2E,MAA3E,CAAtB;AACA,SAAKW,YAAL,GAAoB,CAAC,CAACd,EAAE,GAAG,KAAKO,OAAX,MAAwB,IAAxB,IAAgCP,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACe,IAA7D,KAAsE,EAA1F;AACA,SAAKC,kBAAL,GAA0B,CAAC,CAACf,EAAE,GAAG,KAAKM,OAAX,MAAwB,IAAxB,IAAgCN,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACgB,UAA7D,KAA4E,EAAtG;AACA,SAAKC,QAAL;AACH;;AACDC,EAAAA,QAAQ,GAAG;AACP,QAAI,KAAKf,SAAL,KAAmB,KAAKM,MAAL,CAAYE,IAAnC,EAAyC;AACrC,WAAKQ,YAAL,CAAkBC,UAAlB,CAA6B,KAAKd,OAAlC;AACH;AACJ;;AACKe,EAAAA,MAAM,GAAG;AAAA;;AAAA;AACX,UAAIvB,EAAJ;;AACA,UAAI,KAAI,CAACqB,YAAL,CAAkBG,KAAtB,EAA6B;AACzB,YAAI;AACA,gBAAMC,QAAQ,GAAG,KAAI,CAACJ,YAAL,CAAkBK,KAAnC;AACAD,UAAAA,QAAQ,CAACE,EAAT,GAAc,CAAC,CAAC3B,EAAE,GAAG,KAAI,CAACQ,OAAX,MAAwB,IAAxB,IAAgCR,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAAC2B,EAA7D,KAAoE,IAAlF;AACA,gBAAM,KAAI,CAAC7B,WAAL,CAAiB8B,WAAjB,CAA6BH,QAA7B,CAAN;;AACA,cAAI,KAAI,CAACpB,SAAL,IAAkB,KAAI,CAACM,MAAL,CAAYC,GAAlC,EAAuC;AACnClB,YAAAA,IAAI,CAACmC,IAAL,CAAU,kBAAV,EAA8B,0BAA9B,EAA0D,SAA1D;;AACA,YAAA,KAAI,CAACR,YAAL,CAAkBS,KAAlB;;AACA,YAAA,KAAI,CAACX,QAAL;AACH,WAJD,MAKK,IAAI,KAAI,CAACd,SAAL,IAAkB,KAAI,CAACM,MAAL,CAAYE,IAAlC,EAAwC;AACzCnB,YAAAA,IAAI,CAACmC,IAAL,CAAU,kBAAV,EAA8B,iCAA9B,EAAiE,SAAjE;;AACA,YAAA,KAAI,CAAC9B,MAAL,CAAYgC,QAAZ,CAAqB,CAAC,MAAD,CAArB;AACH;;AACD,UAAA,KAAI,CAACV,YAAL,CAAkBW,QAAlB,CAA2B,UAA3B,EAAuCC,aAAvC;;AACAC,UAAAA,OAAO,CAACC,GAAR,CAAY,0GAAZ,EAAwH,KAAI,CAACd,YAAL,CAAkBW,QAAlB,CAA2B,UAA3B,CAAxH;;AACA,UAAA,KAAI,CAACX,YAAL,CAAkBW,QAAlB,CAA2B,YAA3B,EAAyCC,aAAzC;AACH,SAhBD,CAiBA,OAAOG,CAAP,EAAU;AACNF,UAAAA,OAAO,CAACG,KAAR,CAAcD,CAAd;AACH;AACJ,OArBD,MAsBK;AACD1C,QAAAA,IAAI,CAACmC,IAAL,CAAU,SAAV,EAAqB,oCAArB,EAA2D,OAA3D;AACH;AA1BU;AA2Bd;;AACDS,EAAAA,YAAY,CAACC,KAAD,EAAQ;AAChB,UAAMC,cAAc,GAAG,KAAKnB,YAAL,CAAkBoB,GAAlB,CAAsBF,KAAtB,CAAvB;AACA,WAAO,EAAEC,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuD,KAAK,CAA5D,GAAgEA,cAAc,CAAChB,KAAjF,MAA4FgB,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuD,KAAK,CAA5D,GAAgEA,cAAc,CAACE,OAA3K,IACD,YADC,GAED,CAACF,cAAc,KAAK,IAAnB,IAA2BA,cAAc,KAAK,KAAK,CAAnD,GAAuD,KAAK,CAA5D,GAAgEA,cAAc,CAACE,OAAhF,IACI,UADJ,GAEI,EAJV;AAKH;;AACDC,EAAAA,mBAAmB,CAACJ,KAAD,EAAQ;AACvB,QAAIvC,EAAJ;;AACA,WAAO,CAAC,CAACA,EAAE,GAAG,KAAKqB,YAAL,CAAkBoB,GAAlB,CAAsBF,KAAtB,CAAN,MAAwC,IAAxC,IAAgDvC,EAAE,KAAK,KAAK,CAA5D,GAAgE,KAAK,CAArE,GAAyEA,EAAE,CAAC0B,KAA7E,IAAsF,UAAtF,GAAmG,EAA1G;AACH;;AACDP,EAAAA,QAAQ,GAAG;AACP,SAAKE,YAAL,GAAoB,KAAKxB,EAAL,CAAQ+C,KAAR,CAAc;AAC9BC,MAAAA,MAAM,EAAE,CAAC,EAAD,EAAK,CAACpD,UAAU,CAACqD,QAAZ,CAAL,CADsB;AAE9BC,MAAAA,SAAS,EAAE,CAAC,EAAD,CAFmB;AAG9B/B,MAAAA,IAAI,EAAE,CAAC,QAAD,EAAW,CAACvB,UAAU,CAACqD,QAAZ,CAAX,CAHwB;AAI9B5B,MAAAA,UAAU,EAAE,CAAC,EAAD,EAAK,CAACzB,UAAU,CAACqD,QAAZ,CAAL,CAJkB;AAK9BE,MAAAA,SAAS,EAAE,CAAC,EAAD,EAAK,CAACvD,UAAU,CAACqD,QAAZ,CAAL,CALmB;AAM9BrB,MAAAA,QAAQ,EAAE,CAAC,KAAD,EAAQ,CAAChC,UAAU,CAACqD,QAAZ,CAAR,CANoB;AAO9BG,MAAAA,UAAU,EAAE,CAAC,KAAD,EAAQ,CAACxD,UAAU,CAACqD,QAAZ,CAAR;AAPkB,KAAd,CAApB;AASH;;AACDhC,EAAAA,QAAQ,GAAG;AACP,WAAO,KAAKN,OAAL,IAAgB,QAAQ,KAAKA,OAAL,KAAiB0C,SAAzB,CAAhB,GAAsD,CAAtD,GAA0D,CAAjE;AACH;;AACKC,EAAAA,UAAU,CAACxB,EAAD,EAAK;AAAA;;AAAA;AACjB,UAAI;AACA,cAAM,MAAI,CAAC7B,WAAL,CAAiBsD,cAAjB,CAAgCzB,EAAhC,CAAN;AACAjC,QAAAA,IAAI,CAACmC,IAAL,CAAU,oBAAV,EAAgC,2CAAhC,EAA6E,SAA7E;;AACA,QAAA,MAAI,CAAC9B,MAAL,CAAYgC,QAAZ,CAAqB,CAAC,MAAD,CAArB;AACH,OAJD,CAKA,OAAOsB,GAAP,EAAY;AACR3D,QAAAA,IAAI,CAACmC,IAAL,CAAU,SAAV,EAAqB,uCAArB,EAA8D,OAA9D;AACH;AARgB;AASpB;;AAvFmC,CAAxC;AAyFAlC,aAAa,GAAGL,UAAU,CAAC,CACvBE,SAAS,CAAC;AACN8D,EAAAA,QAAQ,EAAE,UADJ;AAENC,EAAAA,WAAW,EAAE,uBAFP;AAGNC,EAAAA,SAAS,EAAE,CAAC,uBAAD,CAHL;AAINC,EAAAA,SAAS,EAAE,CAAClE,WAAD;AAJL,CAAD,CADc,CAAD,EAOvBI,aAPuB,CAA1B;AAQA,SAASA,aAAT","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { DataService } from '../../services/data.service';\r\nimport { Component } from '@angular/core';\r\nimport { Validators } from '@angular/forms';\r\nimport Swal from 'sweetalert2';\r\nlet FormComponent = class FormComponent {\r\n    constructor(fb, dataService, router) {\r\n        var _a, _b, _c;\r\n        this.fb = fb;\r\n        this.dataService = dataService;\r\n        this.router = router;\r\n        this.sexoList = [];\r\n        this.parentescoList = [];\r\n        this.stateForm = 0;\r\n        var navi = this.router.getCurrentNavigation();\r\n        this.persona = (_a = navi === null || navi === void 0 ? void 0 : navi.extras) === null || _a === void 0 ? void 0 : _a.state;\r\n        this.states = { new: 1, edit: 2 };\r\n        this.stateForm = this.getState();\r\n        this.sexoList = [\"Hombre\", \"Mujer\"];\r\n        this.parentescoList = [\"Padre\", \"Madre\", \"Hermano/a\", \"Tio/a\", \"Primo/a\", \"Abuelo/a\", \"Amigo/a\", \"Otro\"];\r\n        this.sexoInvitado = ((_b = this.persona) === null || _b === void 0 ? void 0 : _b.sexo) || \"\";\r\n        this.parentescoInvitado = ((_c = this.persona) === null || _c === void 0 ? void 0 : _c.parentesco) || \"\";\r\n        this.initForm();\r\n    }\r\n    ngOnInit() {\r\n        if (this.stateForm === this.states.edit) {\r\n            this.invitadoForm.patchValue(this.persona);\r\n        }\r\n    }\r\n    async onSave() {\r\n        var _a;\r\n        if (this.invitadoForm.valid) {\r\n            try {\r\n                const invitado = this.invitadoForm.value;\r\n                invitado.id = ((_a = this.persona) === null || _a === void 0 ? void 0 : _a.id) || null;\r\n                await this.dataService.addInvitado(invitado);\r\n                if (this.stateForm == this.states.new) {\r\n                    Swal.fire('Invitado aÃ±adido', 'Puedes verlo en la lista', 'success');\r\n                    this.invitadoForm.reset();\r\n                    this.initForm();\r\n                }\r\n                else if (this.stateForm == this.states.edit) {\r\n                    Swal.fire('Invitado editado', 'Pulsa Ok Para volver a la lista', 'success');\r\n                    this.router.navigate(['home']);\r\n                }\r\n                this.invitadoForm.controls['invitado'].markAsTouched();\r\n                console.log(\"ðŸš€ ~ file: form.component.ts ~ line 65 ~ FormComponent ~ onSave ~ this.invitadoForm.controls['invitado']\", this.invitadoForm.controls['invitado']);\r\n                this.invitadoForm.controls['confirmado'].markAsTouched();\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n            }\r\n        }\r\n        else {\r\n            Swal.fire('Oops...', 'Comprueba los datos del formulario', 'error');\r\n        }\r\n    }\r\n    isValidField(field) {\r\n        const validatedField = this.invitadoForm.get(field);\r\n        return !(validatedField === null || validatedField === void 0 ? void 0 : validatedField.valid) && (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched)\r\n            ? 'is-invalid'\r\n            : (validatedField === null || validatedField === void 0 ? void 0 : validatedField.touched)\r\n                ? 'is-valid'\r\n                : '';\r\n    }\r\n    notRequiredHasValue(field) {\r\n        var _a;\r\n        return ((_a = this.invitadoForm.get(field)) === null || _a === void 0 ? void 0 : _a.value) ? 'is-valid' : '';\r\n    }\r\n    initForm() {\r\n        this.invitadoForm = this.fb.group({\r\n            nombre: ['', [Validators.required]],\r\n            apellidos: [''],\r\n            sexo: ['Hombre', [Validators.required]],\r\n            parentesco: ['', [Validators.required]],\r\n            ubicacion: ['', [Validators.required]],\r\n            invitado: [false, [Validators.required]],\r\n            confirmado: [false, [Validators.required]],\r\n        });\r\n    }\r\n    getState() {\r\n        return this.persona && typeof (this.persona !== undefined) ? 2 : 1;\r\n    }\r\n    async goToDelete(id) {\r\n        try {\r\n            await this.dataService.deleteInvitado(id);\r\n            Swal.fire('Invitado eliminado', 'Se ha eliminado el invitado correctamente', 'success');\r\n            this.router.navigate(['home']);\r\n        }\r\n        catch (err) {\r\n            Swal.fire('Oops...', 'Hubo un error al eliminar al invitado', 'error');\r\n        }\r\n    }\r\n};\r\nFormComponent = __decorate([\r\n    Component({\r\n        selector: 'app-form',\r\n        templateUrl: './form.component.html',\r\n        styleUrls: ['./form.component.scss'],\r\n        providers: [DataService],\r\n    })\r\n], FormComponent);\r\nexport { FormComponent };\r\n"]},"metadata":{},"sourceType":"module"}